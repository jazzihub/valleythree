<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<h:html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:jsf="http://xmlns.jcp.org/jsf">


<h:head>
	<h:title>
		<ui:insert name="title"></ui:insert>
	</h:title>
	<h:outputStylesheet>
	</h:outputStylesheet>
</h:head>

<h:body>
<h1>Veranstaltung bearbeiten</h1>
	<h:form id="form" prependId = "false" enctype="multipart/form-data">
	<h:dataTable value="#{eventController.e}" var="e">
			<h:column>
				<f:facet name="header">Bezeichnung</f:facet>
					<h:inputText id="name" p:type="text" value="#{event.name}" autofocus="true" required="true" requiredMessage="Geben Sie den Namen der Veranstaltung ein">
						<f:validateLength minimum="1" maximum="45" />
					</h:inputText>
					<h:message for="name"/>
					<h:outputText id="title" name="title" value="#{e.name}"/>
			</h:column>
			<h:column>
				<f:facet name="header">am</f:facet>
					<h:inputText id="date" p:type="date" value="#{event.begin}" p:placeholder="dd.MM.yyyy" required="true" requiredMessage="Geben Sie das Datum im Format dd.MM.yyyy ein">
						<f:convertDateTime pattern="dd.MM.yyyy" timeZone="Europe/Berlin"/>
					</h:inputText>
					<h:message for="date"/>
					<h:outputText value="#{e.begin}">
						<f:convertDateTime pattern="dd.MM.yyyy" timeZone="Europe/Berlin"/>
					</h:outputText>				
			</h:column>
			<h:column>
				<f:facet name="header">um</f:facet>
					<h:inputText id="time" p:type="date" p:placeholder="hh:mm" value="#{event.time}" requiredMessage="Geben Sie die Uhrzeit im Format HH.mm ein" required="true">
						<f:convertDateTime pattern="HH:mm" timeZone="Europe/Berlin"/>
					</h:inputText>
					<h:message for="time"/>
					<h:outputText value="#{e.time}">
						<f:convertDateTime pattern="HH:mm" timeZone="Europe/Berlin"/>
					</h:outputText>
			</h:column>
			<h:column>
				<f:facet name="header">Art</f:facet>
				#{e.kind}
				<h:inputText id="kind" value="#{event.kind}" required="true" requiredMessage="Geben Sie die Art der Veranstaltung ein">
						<f:validateLength minimum="1" maximum="45" />
				</h:inputText>
				<h:message for="kind"/>
			</h:column>
			<h:column>
				<f:facet name="header">Kurzbeschreibung</f:facet>
				#{e.description}
				<h:inputTextarea id="short" value="#{event.description}" required="true" requiredMessage="Geben Sie eine Kurzbeschreibung ein">
					<f:validateLength maximum="120" />
				</h:inputTextarea>
				<h:message for="short"/>
			</h:column>
			<h:column>
				<f:facet name="foto">Foto</f:facet>
				 	<h:graphicImage id="image" url="/image" />
				</h:column>
			<h:column>
				<f:facet name="header">Details</f:facet>
				#{e.detail}
				<h:inputTextarea id="detail" value="#{event.detail}" required="true" requiredMessage="Geben Sie eine Dateilbeschreibung ein">
					<f:validateLength minimum="1" maximum="500" />
				</h:inputTextarea>
				<h:message for="detail"/>
				</h:column>
			<h:column>
				<f:facet name="header">Straße</f:facet>
				#{e.location.street}
				<h:inputText id="strasse" value="#{location.street}" required="true"
					requiredMessage="Geben Sie die Strasse ein">
				<f:validateLength minimum="1" maximum="45" />
				</h:inputText>
				<h:message for="strasse"></h:message>
			</h:column>
			<h:column>
				<f:facet name="header">PLZ</f:facet>
				#{e.location.place.plz}
				<h:inputText id="plz" value="#{place.plz}" p:placeholder="1234"
					required="true" p:pattern="^[0-9]*$"
					requiredMessage="Geben Sie die PLZ ein">
					<f:validateLongRange minimum="1000" maximum="99999" />
				</h:inputText>
				<h:message for="plz"></h:message>
			</h:column>
			<h:column>
				<f:facet name="header">Ort</f:facet>
				#{e.location.place.place}
				<h:inputText id="ort" value="#{place.place}" required="true"
					requiredMessage="Geben Sie den Ort ein">
					<f:validateLength minimum="1" maximum="45" />
				</h:inputText>
				<h:message for="ort"></h:message>
			</h:column>
			<h:column>
				<f:facet name="header">Location</f:facet>
				#{e.location.name}
				<h:inputText id="location" value="#{location.name}" required="true"
				requiredMessage="Geben Sie den Veranstaltungsort ein">
					<f:validateLength minimum="1" maximum="45" />
				</h:inputText>
				<h:message for="location"></h:message>
			</h:column>
			<h:column>
				<f:facet name="header">Mitwirkende</f:facet>
				#{e.contributor}
				<h:inputText type="text" value="#{event.contributor}">
					<f:validateLength maximum="45" />
				</h:inputText>
			</h:column>
			<h:column>
				<f:facet name="header">Ticket Info</f:facet>
				#{e.ticketInfo}
				<h:inputText type="text" value="#{event.ticketInfo}">
					<f:validateLength maximum="45" />
				</h:inputText>
			</h:column>
	</h:dataTable>
	

		<div>
			<h:commandButton id="btn" value="Aktualisieren"
				action="#{eventController.updateEvent()}" type="submit" ></h:commandButton>
			<h:button outcome="#{navigation.organizerArea()}"
				value="Zurück zum Veranstalterbereich" />
		</div>
</h:form>
</h:body>
</h:html>